{% extends 'base.html' %}
{% block content %}

<div id='details'>
    <div class='ps-details'>
        <div class='header'>
            {% if garden.plants[0] %}
              <img src="{{ garden.plants[0].image }}" onerror='this.src="/static/unknown-image.webp"' class="detail-img">
            {% else %}
              <img src="/static/unknown-image.webp" class="detail-img">
            {% endif %}
            <div class="names">
                <div class='name'>{{garden.name}}</div>
                <div class='detail-info'>{{garden.description}}</div>
                <div class='detail-buttons'>
                    {% if garden.user_id != g.user.id %}
                        {% if g.user.is_saved_garden(garden.id) %}
                            <form action='/gardens/{{garden.id}}/delete-save'> 
                                <button>Remove Inspiration</button>
                            </form>
                        {% else %}
                            <form action='/gardens/{{garden.id}}/save'> 
                                <button>Add Inspiration</button>
                            </form>
                        {% endif %}
                    {% else %}
                        <form method="POST" action="/gardens/{{ garden.id }}/delete">
                            <button>Delete Garden</button>
                        </form>
                    {% endif %}
                </div>
            </div>
        </div>
        <div class='plant-container'>
            {% for plant in garden.plants %}
            <div class="plant-card">
                <a href='/plants/{{plant.name}}'>
                    <img src="{{ plant.image }}" onerror='this.src="/static/unknown-image.webp"'>
                    <div class="plant-name">{{plant.name}}</div>
                    {% if garden.user_id == g.user.id %}
                        <form action='/plants/{{plant.id}}/{{garden.id}}/delete-plant'>
                            <button class='dlt-btn'>X</button>
                        </form>
                    {% endif %}
                </a>
            </div>
            {% endfor %}
          </div>
        </div>

    </div>


{% endblock %}