{% extends 'base.html' %}
{% block content %}
  <div>
    <h2>My Gardens</h2>

    <div class='plant-search-form'>
      <form method="POST" id="plant_search_form">
        {{ form.hidden_tag() }}
  
        {% for field in form if field.widget.input_type != 'hidden' %}
          {% for error in field.errors %}
            <span class="text-danger">{{ error }}</span>
          {% endfor %}
          {{ field(placeholder=field.label.text, class="form-control") }}
        {% endfor %}
        <button href="/gardens/create">Add</button>
      </form>
    </div>
    {% if gardens.count() == 0 %}
      <h3 class='sorry'>Sorry, no gardens to show</h3>
    {% else %}
    <div class=plant-container>
      {% for garden in gardens %}
      <div class="plant-card">
          <a href='/gardens/{{garden.id}}'>
            {% if garden.plants[0] %}
              <img src="{{ garden.plants[0].image }}" onerror='this.src="/static/unknown-image.webp"' class="grid-element">
            {% else %}
              <img src="/static/unknown-image.webp" class="grid-element">
            {% endif %}
              <div class="garden-name">{{garden.name}}</div>
            {% if g.user %}
              {% if g.user.id == garden.user_id %}
                <form method="POST" action="/gardens/{{ garden.id }}/delete">
                  <button class='dlt-btn'>X</button>
                </form>
              {% endif %}
            {% endif %}
          </a>
      </div>
      {% endfor %}
    {% endif %}
    </div>

  </div>

{% endblock %}